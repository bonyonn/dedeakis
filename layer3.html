<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pesan Spesial</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" onerror="console.error('Failed to load style.css. Check the file path or case-sensitivity.');">
</head>
<body class="layer-3">
  <div class="overlay"></div>

  <!-- Foto ngambang DI LUAR container -->
  <img id="floatingPhoto" src="akis2.jpg" alt="Foto Dede Akis" onerror="console.error('Failed to load akis2.jpg. Check the file path or case-sensitivity.');">

  <!-- Container utama -->
  <div class="container">
    <!-- Amplop -->
    <div id="envelopeContainer">
      <div id="envelope">
        <div class="envelope-front"></div>
        <div class="envelope-flap"></div>
        <div id="envelopeSeal" class="envelope-seal">💖</div>
      </div>
      <h2 class="quiz-title envelope-title">Pesan Spesial untuk Dede Akis ❤️</h2>
      <p class="envelope-instruction">Klik segel 💖 untuk membuka pesan spesial</p>
    </div>

    <!-- Pertanyaan -->
    <div id="question" class="hidden">
      <p class="quiz-desc">Dede Akis, kamu sayang aku ga?</p>
      <p class="quiz-desc">Pilih pakai hati 🤍 karena pilihanmu menentukan perjalanan ini lanjutnya akan kemana.</p>
      <div class="button-container">
        <button id="yesBtn">Ya</button>
        <button id="noBtn">Tidak</button>
      </div>
    </div>

    <!-- Pesan manis -->
    <div id="sweetMessage" class="hidden">
      <p class="quiz-desc">Aku tau kok kamu sayang aku, makasih ya Dede Akis! Aku juga sayang kamu banget! 💕</p>
    </div>

    <!-- Tombol mute -->
    <div id="musicControl">
      <button id="muteBtn">Mute Musik</button>
    </div>
  </div>

  <!-- Tombol di bawah kolom -->
  <a id="nextBtn" href="layer4.html" class="hidden" onclick="checkNextPage(event)">Lanjut ke Stage Berikutnya</a>

  <!-- Audio -->
  <audio id="backgroundMusic" loop autoplay>
    <source src="boba_date.mp3" type="audio/mpeg">
    Browsermu tidak mendukung elemen audio.
  </audio>

  <div id="heartsContainer"></div>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <script src="script-layer3.js" onerror="console.error('Failed to load script-layer3.js. Check the file path or case-sensitivity.');"></script>
  <script>
    // Debug untuk memastikan file dimuat
    const img = new Image();
    img.src = 'bonyon.jpg';
    img.onload = () => console.log('bonyon.jpg loaded successfully');
    img.onerror = () => console.error('Failed to load bonyon.jpg. Check the file path or case-sensitivity.');

    const audio = new Audio('boba_date.mp3');
    audio.oncanplay = () => console.log('boba_date.mp3 loaded successfully');
    audio.onerror = () => console.error('Failed to load boba_date.mp3. Check the file path or case-sensitivity.');

    function checkNextPage(event) {
      fetch('layer4.html', { method: 'HEAD' })
        .then(response => {
          if (!response.ok) throw new Error('Layer 4 not found');
          window.location.href = 'layer4.html';
        })
        .catch(err => {
          event.preventDefault();
          alert('Maaf, halaman Layer 4 gak ditemukan. Pastikan file layer4.html ada di folder yang benar.');
          console.error(err);
        });
    }
  </script>
</body>
</html>